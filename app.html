<!DOCTYPE html>
<html>
<head>
    <title>Model Information with Popups</title>
    <style>
        .info-list li {
            margin-bottom: 10px;
        }
        .popup {
            display: none;
            position: fixed;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            border: 1px solid #000;
            background-color: #fff;
            padding: 20px;
            z-index: 1000;
        }
        .overlay {
            display: none;
            position: fixed;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 500;
        }
    </style>
</head>
<body>
    <h2>Model Data as Lists with Popups</h2>
    <div id="classesList"></div>
    <div id="markersList"></div>
    <div id="sectionsList"></div>
    <div id="popup" class="popup"></div>
    <div id="overlay" class="overlay" onclick="closePopup()"></div>

    <script>
        // Load the model data from an external JSON file
        fetch('https://xbokmd.github.io/plastilinn/metamodel.json')
            .then(response => response.json())
            .then(data => {
                createList('classes', data.classes);
                createList('markers', data.markers);
                createList('sections', data.sections);
            }).catch(error => console.error('Error loading the JSON:', error));

        function createList(category, items) {
            var listHtml = `<h3>${category.charAt(0).toUpperCase() + category.slice(1)}</h3><ul class="info-list">`;
            items.forEach((item, index) => {
                listHtml += `<li>
                                ${item.icon || ''} ${item.classes || item.marker || item.name}
                                <a href="#" onclick="showPopup('${category}', ${index})">View More</a>
                             </li>`;
            });
            listHtml += '</ul>';
            document.getElementById(`${category}List`).innerHTML = listHtml;
        }

        // Function to show the popup with detailed information
        function showPopup(category, index) {
            fetch('https://xbokmd.github.io/plastilinn/metamodel.json')
                .then(response => response.json())
                .then(data => {
                    var item = data[category][index];
                    var popupHtml = `<strong>${category.charAt(0).toUpperCase() + category.slice(1)}:</strong> ${item.classes || item.marker || item.name}<br>`;
                    Object.keys(item).forEach(key => {
                        popupHtml += `<strong>${key.charAt(0).toUpperCase() + key.slice(1)}:</strong> ${item[key]}<br>`;
                    });
                    document.getElementById('popup').innerHTML = popupHtml;
                    document.getElementById('popup').style.display = 'block';
                    document.getElementById('overlay').style.display = 'block';
                });
        }

        // Function to close the popup
        function closePopup() {
            document.getElementById('popup').style.display = 'none';
            document.getElementById('overlay').style.display = 'none';
        }
    </script>
</body>
</html>
